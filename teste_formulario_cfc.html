<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Formul√°rio CFC</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-group { margin: 15px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .btn { padding: 10px 20px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .log { background-color: #f8f9fa; padding: 15px; border-radius: 4px; margin: 20px 0; font-family: monospace; border-left: 4px solid #007bff; }
        .required { color: red; }
    </style>
</head>
<body>
    <h1>üß™ Teste do Formul√°rio de CFC</h1>
    
    <form id="formCFC" onsubmit="return false;">
        <div class="form-group">
            <label for="nome">Nome do CFC <span class="required">*</span></label>
            <input type="text" id="nome" name="nome" value="CFC Teste" required>
        </div>
        
        <div class="form-group">
            <label for="cnpj">CNPJ <span class="required">*</span></label>
            <input type="text" id="cnpj" name="cnpj" value="12.345.678/0001-90" required>
        </div>
        
        <div class="form-group">
            <label for="cidade">Cidade <span class="required">*</span></label>
            <input type="text" id="cidade" name="cidade" value="S√£o Paulo" required>
        </div>
        
        <div class="form-group">
            <label for="uf">UF <span class="required">*</span></label>
            <select id="uf" name="uf" required>
                <option value="">Selecione...</option>
                <option value="SP" selected>S√£o Paulo</option>
                <option value="RJ">Rio de Janeiro</option>
                <option value="MG">Minas Gerais</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="email">E-mail</label>
            <input type="email" id="email" name="email" value="teste@cfc.com">
        </div>
        
        <div class="form-group">
            <label for="telefone">Telefone</label>
            <input type="text" id="telefone" name="telefone" value="(11) 99999-9999">
        </div>
        
        <div class="form-group">
            <label for="ativo">Status</label>
            <select id="ativo" name="ativo">
                <option value="1" selected>Ativo</option>
                <option value="0">Inativo</option>
            </select>
        </div>
        
        <div class="form-group">
            <button type="button" class="btn btn-secondary" onclick="testarFuncao()">
                üîç Testar Fun√ß√£o
            </button>
            
            <button type="button" class="btn btn-primary" onclick="salvarCFC()">
                üíæ Salvar CFC
            </button>
            
            <button type="button" class="btn btn-secondary" onclick="verificarConsole()">
                üìã Verificar Console
            </button>
        </div>
    </form>
    
    <div id="log" class="log">
        <strong>üìã Log de Testes:</strong><br>
        Clique nos bot√µes acima para executar os testes...
    </div>

    <script>
        // Fun√ß√£o para mostrar alertas (simulada)
        function mostrarAlerta(mensagem, tipo) {
            const log = document.getElementById('log');
            log.innerHTML += `<br><span style="color: ${tipo === 'success' ? 'green' : tipo === 'danger' ? 'red' : 'orange'}">${mensagem}</span>`;
            console.log(`[${tipo.toUpperCase()}] ${mensagem}`);
        }
        
        // Fun√ß√£o para fechar modal (simulada)
        function fecharModalCFC() {
            const log = document.getElementById('log');
            log.innerHTML += `<br>ü™ü Modal seria fechado`;
            console.log('Modal seria fechado');
        }
        
        // Fun√ß√£o de teste da fun√ß√£o
        function testarFuncao() {
            const log = document.getElementById('log');
            log.innerHTML += `<br>üîç Testando fun√ß√£o salvarCFC...<br>`;
            
            try {
                if (typeof salvarCFC === 'function') {
                    log.innerHTML += `‚úÖ Fun√ß√£o salvarCFC est√° definida<br>`;
                    log.innerHTML += `üìù Tipo: ${typeof salvarCFC}<br>`;
                    log.innerHTML += `üîß Fun√ß√£o: ${salvarCFC.toString().substring(0, 100)}...<br>`;
                } else {
                    log.innerHTML += `‚ùå Fun√ß√£o salvarCFC n√£o est√° definida<br>`;
                }
                
                // Verificar se o formul√°rio existe
                const form = document.getElementById('formCFC');
                if (form) {
                    log.innerHTML += `‚úÖ Formul√°rio encontrado<br>`;
                } else {
                    log.innerHTML += `‚ùå Formul√°rio n√£o encontrado<br>`;
                }
                
                // Verificar se o bot√£o existe
                const btn = document.getElementById('btnSalvarCFC');
                if (btn) {
                    log.innerHTML += `‚úÖ Bot√£o encontrado<br>`;
                } else {
                    log.innerHTML += `‚ùå Bot√£o n√£o encontrado<br>`;
                }
                
            } catch (error) {
                log.innerHTML += `‚ùå Erro: ${error.message}<br>`;
                console.error('Erro no teste:', error);
            }
        }
        
        // Fun√ß√£o para verificar console
        function verificarConsole() {
            const log = document.getElementById('log');
            log.innerHTML += `<br>üìã Verificando console...<br>`;
            log.innerHTML += `üí° Abra o console do navegador (F12) para ver os logs detalhados<br>`;
            
            console.log('=== VERIFICA√á√ÉO DO CONSOLE ===');
            console.log('Data/Hora:', new Date().toLocaleString());
            console.log('Fun√ß√£o salvarCFC dispon√≠vel:', typeof salvarCFC === 'function');
            console.log('Formul√°rio encontrado:', !!document.getElementById('formCFC'));
            console.log('Bot√£o encontrado:', !!document.getElementById('btnSalvarCFC'));
            console.log('==============================');
        }
        
        // Fun√ß√£o de salvar CFC (vers√£o de teste)
        function salvarCFC() {
            const log = document.getElementById('log');
            log.innerHTML += `<br>üöÄ Fun√ß√£o salvarCFC chamada<br>`;
            log.innerHTML += `üìÖ ${new Date().toLocaleTimeString()}<br>`;
            
            console.log('Fun√ß√£o salvarCFC chamada');
            
            try {
                const form = document.getElementById('formCFC');
                const formData = new FormData(form);
                
                log.innerHTML += `‚úÖ Formul√°rio capturado<br>`;
                
                // Valida√ß√µes b√°sicas
                if (!formData.get('nome').trim()) {
                    mostrarAlerta('Nome do CFC √© obrigat√≥rio', 'danger');
                    return;
                }
                
                if (!formData.get('cnpj').trim()) {
                    mostrarAlerta('CNPJ √© obrigat√≥rio', 'danger');
                    return;
                }
                
                if (!formData.get('cidade').trim()) {
                    mostrarAlerta('Cidade √© obrigat√≥ria', 'danger');
                    return;
                }
                
                if (!formData.get('uf')) {
                    mostrarAlerta('UF √© obrigat√≥ria', 'danger');
                    return;
                }
                
                log.innerHTML += `‚úÖ Valida√ß√µes passaram<br>`;
                
                // Preparar dados para envio
                const cfcData = {
                    nome: formData.get('nome').trim(),
                    cnpj: formData.get('cnpj').trim(),
                    cidade: formData.get('cidade').trim(),
                    uf: formData.get('uf'),
                    email: formData.get('email').trim(),
                    telefone: formData.get('telefone').trim(),
                    ativo: formData.get('ativo') === '1'
                };
                
                log.innerHTML += `‚úÖ Dados preparados: ${JSON.stringify(cfcData)}<br>`;
                
                // Simular requisi√ß√£o para a API
                log.innerHTML += `üîÑ Simulando requisi√ß√£o para a API...<br>`;
                
                // Simular delay
                setTimeout(() => {
                    log.innerHTML += `‚úÖ Simula√ß√£o conclu√≠da - CFC seria salvo<br>`;
                    log.innerHTML += `üí° Em produ√ß√£o, aqui seria feita a requisi√ß√£o real para a API<br>`;
                    
                    mostrarAlerta('CFC salvo com sucesso! (Simulado)', 'success');
                    
                    // Simular fechamento do modal
                    fecharModalCFC();
                    
                    // Simular recarregamento da p√°gina
                    log.innerHTML += `üîÑ Simulando recarregamento da p√°gina...<br>`;
                    
                }, 1000);
                
            } catch (error) {
                log.innerHTML += `‚ùå Erro: ${error.message}<br>`;
                console.error('Erro na fun√ß√£o salvarCFC:', error);
                mostrarAlerta('Erro interno. Tente novamente.', 'danger');
            }
        }
        
        // Log de inicializa√ß√£o
        console.log('üß™ Teste do Formul√°rio de CFC carregado');
        console.log('üìÖ', new Date().toLocaleString());
        
        // Verificar se a fun√ß√£o est√° dispon√≠vel
        if (typeof salvarCFC === 'function') {
            console.log('‚úÖ Fun√ß√£o salvarCFC encontrada e dispon√≠vel');
        } else {
            console.log('‚ùå Fun√ß√£o salvarCFC n√£o encontrada');
        }
        
        // Verificar se o formul√°rio existe
        if (document.getElementById('formCFC')) {
            console.log('‚úÖ Formul√°rio encontrado');
        } else {
            console.log('‚ùå Formul√°rio n√£o encontrado');
        }
    </script>
</body>
</html>
