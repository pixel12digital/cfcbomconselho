<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Modal CFC</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- CSS espec√≠fico para CFCs -->
    <link href="admin/assets/css/cfcs.css" rel="stylesheet">
    
    <style>
        /* CSS Inline para Garantir Funcionamento do Modal */
        #modalCFC .modal-dialog {
            max-width: 1000px !important;
            width: 1000px !important;
            margin: 2rem auto !important;
        }
        
        #modalCFC .modal-content {
            width: 100% !important;
            max-width: none !important;
        }
        
        /* For√ßar largura em todas as resolu√ß√µes */
        @media (max-width: 1200px) {
            #modalCFC .modal-dialog {
                max-width: 90vw !important;
                width: 90vw !important;
                margin: 1rem auto !important;
            }
        }
        
        @media (max-width: 768px) {
            #modalCFC .modal-dialog {
                max-width: 95vw !important;
                width: 95vw !important;
                margin: 0.5rem auto !important;
            }
        }
        
        @media (max-width: 576px) {
            #modalCFC .modal-dialog {
                max-width: 98vw !important;
                width: 98vw !important;
                margin: 0.25rem auto !important;
            }
        }
        
        /* Garantir que o modal n√£o seja cortado */
        .modal-custom-cfc {
            max-width: 1000px !important;
            width: 1000px !important;
            margin: 2rem auto !important;
        }
        
        /* Sobrescrever Bootstrap completamente */
        .modal-dialog.modal-custom-cfc {
            max-width: 1000px !important;
            width: 1000px !important;
            margin: 2rem auto !important;
        }
        
        /* Teste de largura */
        .test-width {
            border: 2px solid red;
            background: rgba(255, 0, 0, 0.1);
            padding: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1>Teste do Modal de CFC</h1>
        <p>Este √© um teste para verificar se o modal est√° sendo exibido corretamente sem corte lateral.</p>
        
        <button class="btn btn-primary" onclick="abrirModalCFC('criar')">
            <i class="fas fa-plus me-1"></i>Abrir Modal CFC
        </button>
        
        <div class="test-width">
            <strong>Largura da tela:</strong> <span id="screen-width"></span>px<br>
            <strong>Largura do viewport:</strong> <span id="viewport-width"></span>px
        </div>
    </div>

    <!-- Modal Bootstrap para Cadastro/Edi√ß√£o de CFC -->
    <div class="modal fade" id="modalCFC" tabindex="-1" aria-labelledby="modalCFCLabel" aria-hidden="true">
        <div class="modal-dialog modal-custom-cfc">
            <div class="modal-content">
                <form id="formCFC" onsubmit="return false;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalTitle">
                            <i class="fas fa-building me-2"></i>Novo CFC
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" name="acao" id="acaoCFC" value="criar">
                        <input type="hidden" name="cfc_id" id="cfc_id" value="">
                        
                        <div class="container-fluid">
                            <!-- Se√ß√£o 1: Informa√ß√µes B√°sicas -->
                            <div class="row mb-2">
                                <div class="col-12">
                                    <h6 class="text-primary border-bottom pb-1 mb-2">
                                        <i class="fas fa-building me-1"></i>Informa√ß√µes B√°sicas
                                    </h6>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="nome" class="form-label">Nome do CFC *</label>
                                        <input type="text" class="form-control" id="nome" name="nome" required 
                                               placeholder="Nome completo do Centro de Forma√ß√£o de Condutores">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="cnpj" class="form-label">CNPJ *</label>
                                        <input type="text" class="form-control" id="cnpj" name="cnpj" required 
                                               placeholder="00.000.000/0000-00">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-2">
                                <div class="col-md-12">
                                    <div class="mb-1">
                                        <label for="razao_social" class="form-label">Raz√£o Social</label>
                                        <input type="text" class="form-control" id="razao_social" name="razao_social" 
                                               placeholder="Raz√£o social da empresa (opcional)">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Se√ß√£o 2: Contato -->
                            <div class="row mb-2">
                                <div class="col-12">
                                    <h6 class="text-primary border-bottom pb-1 mb-2">
                                        <i class="fas fa-phone me-1"></i>Contato
                                    </h6>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="email" class="form-label">E-mail</label>
                                        <input type="email" class="form-control" id="email" name="email" 
                                               placeholder="contato@cfc.com.br">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="telefone" class="form-label">Telefone</label>
                                        <input type="text" class="form-control" id="telefone" name="telefone" 
                                               placeholder="(00) 00000-0000">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Se√ß√£o 3: Endere√ßo -->
                            <div class="row mb-2">
                                <div class="col-12">
                                    <h6 class="text-primary border-bottom pb-1 mb-2">
                                        <i class="fas fa-map-marker-alt me-1"></i>Endere√ßo
                                    </h6>
                                </div>
                                <div class="col-md-2">
                                    <div class="mb-1">
                                        <label for="cep" class="form-label">CEP</label>
                                        <input type="text" class="form-control" id="cep" name="cep" 
                                               placeholder="00000-000">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-1">
                                        <label for="endereco" class="form-label">Endere√ßo</label>
                                        <input type="text" class="form-control" id="endereco" name="endereco" 
                                               placeholder="Rua, Avenida, n√∫mero, etc.">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="mb-1">
                                        <label for="bairro" class="form-label">Bairro</label>
                                        <input type="text" class="form-control" id="bairro" name="bairro" 
                                               placeholder="Centro, Jardim, etc.">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="mb-1">
                                        <label for="cidade" class="form-label">Cidade</label>
                                        <input type="text" class="form-control" id="cidade" name="cidade" 
                                               placeholder="Nome da cidade">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="mb-1">
                                        <label for="uf" class="form-label">UF</label>
                                        <select class="form-select" id="uf" name="uf">
                                            <option value="">Selecione...</option>
                                            <option value="SP">S√£o Paulo</option>
                                            <option value="RJ">Rio de Janeiro</option>
                                            <option value="MG">Minas Gerais</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times me-1"></i>Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary" id="btnSalvarCFC">
                            <i class="fas fa-save me-1"></i>Salvar CFC
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript de teste -->
    <script>
        // Fun√ß√£o para abrir modal de CFC
        function abrirModalCFC(modo = 'criar') {
            console.log('üöÄ Abrindo modal de CFC em modo:', modo);
            
            const modal = document.getElementById('modalCFC');
            if (!modal) {
                console.error('‚ùå Modal n√£o encontrado!');
                alert('Erro: Modal n√£o encontrado na p√°gina!');
                return;
            }
            
            // SOLU√á√ÉO CR√çTICA: For√ßar estilos CSS antes de abrir o modal
            const modalDialog = modal.querySelector('.modal-dialog');
            if (modalDialog) {
                modalDialog.style.maxWidth = '1000px';
                modalDialog.style.width = '1000px';
                modalDialog.style.margin = '2rem auto';
                
                // Aplicar estilos responsivos
                if (window.innerWidth <= 1200) {
                    modalDialog.style.maxWidth = '90vw';
                    modalDialog.style.width = '90vw';
                    modalDialog.style.margin = '1rem auto';
                }
                if (window.innerWidth <= 768) {
                    modalDialog.style.maxWidth = '95vw';
                    modalDialog.style.width = '95vw';
                    modalDialog.style.margin = '0.5rem auto';
                }
                if (window.innerWidth <= 576) {
                    modalDialog.style.maxWidth = '98vw';
                    modalDialog.style.width = '98vw';
                    modalDialog.style.margin = '0.25rem auto';
                }
            }
            
            // Mostrar modal usando Bootstrap
            if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
                const bootstrapModal = new bootstrap.Modal(modal);
                bootstrapModal.show();
            } else {
                // Fallback para modal customizado
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
            
            console.log('‚úÖ Modal aberto com sucesso!');
        }
        
        // Atualizar informa√ß√µes de largura
        function updateWidthInfo() {
            document.getElementById('screen-width').textContent = screen.width;
            document.getElementById('viewport-width').textContent = window.innerWidth;
        }
        
        // Atualizar na carga da p√°gina e no redimensionamento
        window.addEventListener('load', updateWidthInfo);
        window.addEventListener('resize', updateWidthInfo);
        
        // Atualizar inicialmente
        updateWidthInfo();
    </script>
</body>
</html>
