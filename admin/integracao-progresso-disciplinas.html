<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Integra√ß√£o - Progresso das Disciplinas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 2rem;
            background-color: #f8f9fa;
        }
        .fix-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
        }
        .fix-item {
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            background: #f8f9fa;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            font-size: 0.9rem;
        }
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }
        .before, .after {
            padding: 1rem;
            border-radius: 8px;
        }
        .before {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        .after {
            background: #d4edda;
            border: 1px solid #c3e6cb;
        }
    </style>
</head>
<body>
    <div class="fix-container">
        <h1 class="mb-4">üéØ Integra√ß√£o - Progresso das Disciplinas</h1>
        
        <div class="success">
            <strong>‚úÖ OBJETIVO ALCAN√áADO:</strong><br>
            Integrar as informa√ß√µes de progresso das disciplinas diretamente na se√ß√£o "Disciplinas da Turma", tornando a interface mais enxuta e organizada.
        </div>

        <div class="before-after">
            <div class="before">
                <h5><i class="fas fa-times text-danger me-2"></i>ANTES (Separado)</h5>
                <ul>
                    <li>Se√ß√£o "Disciplinas da Turma" com apenas nome e carga hor√°ria</li>
                    <li>Se√ß√£o separada "Progresso das Disciplinas" com barras de progresso</li>
                    <li>Duas se√ß√µes distintas ocupando mais espa√ßo</li>
                    <li>Informa√ß√µes espalhadas</li>
                </ul>
            </div>
            <div class="after">
                <h5><i class="fas fa-check text-success me-2"></i>DEPOIS (Integrado)</h5>
                <ul>
                    <li>Uma √∫nica se√ß√£o "Disciplinas da Turma"</li>
                    <li>Informa√ß√µes de progresso integradas em cada disciplina</li>
                    <li>Interface mais compacta e organizada</li>
                    <li>Todas as informa√ß√µes em um local</li>
                </ul>
            </div>
        </div>

        <div class="fix-item">
            <h5><i class="fas fa-code text-primary me-2"></i>Implementa√ß√£o da Integra√ß√£o</h5>
            <p><strong>Modifica√ß√£o na se√ß√£o de disciplinas:</strong></p>
            <div class="code-block">
<?php foreach ($disciplinasSelecionadas as $disciplina): ?>
    <?php 
    // Buscar informa√ß√µes de progresso para esta disciplina
    $progressoDisciplina = null;
    if (!empty($progressoDisciplinas)) {
        foreach ($progressoDisciplinas as $progresso) {
            if ($progresso['disciplina_id'] == $disciplina['disciplina_id']) {
                $progressoDisciplina = $progresso;
                break;
            }
        }
    }
    ?>
    <div class="disciplina-edit-item" data-disciplina-id="<?= $disciplina['disciplina_id'] ?>" 
         style="border: 1px solid #e9ecef; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
        <div style="display: grid; grid-template-columns: 1fr auto; gap: 15px; align-items: start;">
            <div>
                <!-- Nome da disciplina com contador de aulas -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <strong style="color: #023A8D;"><?= htmlspecialchars($disciplina['nome_disciplina']) ?></strong>
                    <span style="font-size: 0.9rem; color: #666;">
                        <?= isset($progressoDisciplina['aulas_completas']) ? $progressoDisciplina['aulas_completas'] : '0' ?>/<?= isset($progressoDisciplina['total_aulas']) ? $progressoDisciplina['total_aulas'] : '0' ?> aulas
                    </span>
                </div>
                
                <!-- Carga hor√°ria -->
                <div style="font-size: 0.9rem; color: #666; margin-bottom: 8px;">
                    Carga hor√°ria: <?= isset($disciplina['carga_horaria']) ? $disciplina['carga_horaria'] : '0' ?>h
                </div>
                
                <!-- Barra de progresso integrada -->
                <div style="background: #e9ecef; border-radius: 10px; height: 6px; overflow: hidden; margin-bottom: 5px;">
                    <div style="background: linear-gradient(90deg, #28a745, #20c997); height: 100%; width: <?= isset($progressoDisciplina['percentual_completo']) ? $progressoDisciplina['percentual_completo'] : '0' ?>%; transition: width 0.3s ease;"></div>
                </div>
                
                <!-- Percentual e aulas restantes -->
                <div style="font-size: 0.85rem; color: #666;">
                    <?= isset($progressoDisciplina['percentual_completo']) ? $progressoDisciplina['percentual_completo'] : '0' ?>% completo - Faltam <?= isset($progressoDisciplina['aulas_restantes']) ? $progressoDisciplina['aulas_restantes'] : '0' ?> aulas
                </div>
            </div>
            <!-- Bot√£o de remover -->
            <button class="remove-disciplina-btn" onclick="removeDisciplina(<?= $disciplina['disciplina_id'] ?>)">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    </div>
<?php endforeach; ?>
            </div>
        </div>

        <div class="fix-item">
            <h5><i class="fas fa-trash text-danger me-2"></i>Remo√ß√£o da Se√ß√£o Separada</h5>
            <p><strong>Se√ß√£o "Progresso das Disciplinas" removida:</strong></p>
            <div class="code-block">
<!-- REMOVIDO: Progresso das Disciplinas -->
<!-- Esta se√ß√£o foi completamente removida pois suas informa√ß√µes -->
<!-- foram integradas diretamente na se√ß√£o "Disciplinas da Turma" -->
            </div>
        </div>

        <div class="success">
            <h5><i class="fas fa-check-circle text-success me-2"></i>Benef√≠cios da Integra√ß√£o</h5>
            <ul>
                <li><strong>‚úÖ Interface mais limpa:</strong> Menos se√ß√µes na p√°gina</li>
                <li><strong>‚úÖ Informa√ß√µes consolidadas:</strong> Tudo relacionado √† disciplina em um local</li>
                <li><strong>‚úÖ Melhor UX:</strong> Usu√°rio n√£o precisa navegar entre se√ß√µes</li>
                <li><strong>‚úÖ Economia de espa√ßo:</strong> P√°gina mais compacta</li>
                <li><strong>‚úÖ Visual consistente:</strong> Cada disciplina como um card completo</li>
                <li><strong>‚úÖ F√°cil manuten√ß√£o:</strong> Menos c√≥digo duplicado</li>
            </ul>
        </div>

        <div class="success">
            <h5><i class="fas fa-eye text-info me-2"></i>Estrutura Visual da Disciplina Integrada</h5>
            <div style="border: 1px solid #e9ecef; border-radius: 8px; padding: 15px; margin: 1rem 0; background: white;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <strong style="color: #023A8D;">Legisla√ß√£o de Tr√¢nsito</strong>
                    <span style="font-size: 0.9rem; color: #666;">0/0 aulas</span>
                </div>
                
                <div style="font-size: 0.9rem; color: #666; margin-bottom: 8px;">
                    Carga hor√°ria: 0h
                </div>
                
                <div style="background: #e9ecef; border-radius: 10px; height: 6px; overflow: hidden; margin-bottom: 5px;">
                    <div style="background: linear-gradient(90deg, #28a745, #20c997); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                </div>
                
                <div style="font-size: 0.85rem; color: #666;">
                    0% completo - Faltam 0 aulas
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="?page=turmas-teoricas&acao=detalhes&turma_id=6" class="btn btn-success btn-lg">
                <i class="fas fa-play me-2"></i>Ver Interface Integrada
            </a>
            <a href="admin/correcao-texto-cortado-apos-salvar.html" class="btn btn-outline-primary btn-lg">
                <i class="fas fa-history me-2"></i>Ver Corre√ß√£o Anterior
            </a>
        </div>
    </div>

    <script>
        console.log('üéØ [INTEGRA√á√ÉO] Progresso das disciplinas integrado com sucesso!');
        console.log('üéØ [INTEGRA√á√ÉO] Interface mais enxuta e organizada');
    </script>
</body>
</html>
