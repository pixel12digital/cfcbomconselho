<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Erro Sintaxe</title>
</head>
<body>
    <h1>Teste de Erro de Sintaxe</h1>
    
    <div>
        <label>Tipo de Curso:</label>
        <select id="curso_tipo">
            <option value="">Selecione...</option>
            <option value="formacao_45h">Forma√ß√£o 45h</option>
        </select>
    </div>
    
    <div>
        <label>Total de Horas:</label>
        <span id="total-horas-disciplinas">0</span>h
    </div>
    
    <div>
        <label>Disciplina:</label>
        <div class="disciplina-item">
            <select onchange="atualizarTotalHorasRegressivo()">
                <option value="">Selecione...</option>
                <option value="1" data-aulas="20">Disciplina A - 20h</option>
                <option value="2" data-aulas="15">Disciplina B - 15h</option>
            </select>
        </div>
    </div>
    
    <button onclick="testarFuncao()">Testar Fun√ß√£o</button>
    
    <script>
        // Fun√ß√£o simplificada para garantir que seja definida
        function atualizarTotalHorasRegressivo() {
            console.log('üîÑ atualizarTotalHorasRegressivo EXECUTADA (vers√£o simplificada)');
            
            try {
                const cursoSelect = document.getElementById('curso_tipo');
                const totalHorasElement = document.getElementById('total-horas-disciplinas');
                
                console.log('üîç cursoSelect:', cursoSelect);
                console.log('üîç totalHorasElement:', totalHorasElement);
                
                if (!cursoSelect || !totalHorasElement) {
                    console.error('‚ùå Elementos n√£o encontrados');
                    return;
                }
                
                const tipoCurso = cursoSelect.value;
                console.log('üîç tipoCurso selecionado:', tipoCurso);
                
                if (!tipoCurso) {
                    totalHorasElement.textContent = '0';
                    return;
                }
                
                const cargasHorarias = {
                    'formacao_45h': 45,
                    'formacao_acc_20h': 20,
                    'reciclagem_infrator': 30,
                    'atualizacao': 15
                };
                
                const cargaHorariaTotal = cargasHorarias[tipoCurso] || 0;
                console.log('üîç cargaHorariaTotal:', cargaHorariaTotal);
                
                let horasUtilizadas = 0;
                
                const disciplinas = document.querySelectorAll('.disciplina-item');
                console.log('üîç Total de disciplina-items encontrados:', disciplinas.length);
                
                disciplinas.forEach(function(item, index) {
                    console.log('üîç Verificando disciplina-item ' + index + ':', item);
                    const select = item.querySelector('select');
                    console.log('üîç Select encontrado:', select);
                    console.log('üîç Select value:', select ? select.value : 'N/A');
                    
                    if (select && select.value) {
                        const selectedOption = select.options[select.selectedIndex];
                        const horasDisciplina = parseInt(selectedOption.dataset.aulas) || 0;
                        horasUtilizadas += horasDisciplina;
                        console.log('üìö Disciplina ' + selectedOption.textContent + ': ' + horasDisciplina + 'h');
                    } else {
                        console.log('‚ÑπÔ∏è Disciplina-item ' + index + ' n√£o tem select ou valor selecionado');
                    }
                });
                
                const horasRestantes = Math.max(0, cargaHorariaTotal - horasUtilizadas);
                totalHorasElement.textContent = horasRestantes;
                
                console.log('üìä Total: ' + cargaHorariaTotal + 'h - Utilizadas: ' + horasUtilizadas + 'h = Restantes: ' + horasRestantes + 'h');
                console.log('‚úÖ Total atualizado no DOM: ' + totalHorasElement.textContent);
                
            } catch (error) {
                console.error('‚ùå Erro na fun√ß√£o atualizarTotalHorasRegressivo:', error);
            }
        }
        
        // Garantir que a fun√ß√£o seja global
        window.atualizarTotalHorasRegressivo = atualizarTotalHorasRegressivo;
        
        function testarFuncao() {
            console.log('üß™ Testando fun√ß√£o...');
            console.log('Fun√ß√£o existe:', typeof atualizarTotalHorasRegressivo);
            console.log('Fun√ß√£o global existe:', typeof window.atualizarTotalHorasRegressivo);
            
            if (typeof atualizarTotalHorasRegressivo === 'function') {
                atualizarTotalHorasRegressivo();
            } else {
                console.error('‚ùå Fun√ß√£o n√£o encontrada!');
            }
        }
        
        // Teste autom√°tico ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ P√°gina carregada');
            console.log('Fun√ß√£o existe:', typeof atualizarTotalHorasRegressivo);
        });
    </script>
</body>
</html>
