<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Contador Regressivo de Horas</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f8f9fa; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #dee2e6; border-radius: 5px; }
        .success { color: #28a745; font-weight: bold; }
        .error { color: #dc3545; font-weight: bold; }
        .warning { color: #ffc107; font-weight: bold; }
        .info { color: #17a2b8; font-weight: bold; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .test-result.success { background: #d4edda; border: 1px solid #c3e6cb; }
        .test-result.error { background: #f8d7da; border: 1px solid #f5c6cb; }
        .test-result.warning { background: #fff3cd; border: 1px solid #ffeaa7; }
        .test-result.info { background: #d1ecf1; border: 1px solid #bee5eb; }
        .code { background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; border: 1px solid #dee2e6; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { border: 1px solid #dee2e6; padding: 8px; text-align: left; }
        th { background: #f8f9fa; font-weight: bold; }
        .btn { padding: 8px 16px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-warning { background: #ffc107; color: black; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Teste - Contador Regressivo de Horas</h1>
        
        <div class="test-result info">
            <h3>üìã Objetivo do Teste:</h3>
            <p>Verificar se o sistema de contador regressivo est√° funcionando corretamente conforme implementado.</p>
        </div>

        <div class="test-section">
            <h3>üîß Fun√ß√£o: obterCargaHorariaCurso()</h3>
            <p>Testa se a fun√ß√£o retorna a carga hor√°ria correta para cada tipo de curso:</p>
            
            <button class="btn btn-primary" onclick="testarObterCargaHoraria()">Testar Carga Hor√°ria</button>
            <div id="resultado-carga-horaria"></div>
        </div>

        <div class="test-section">
            <h3>üìä Fun√ß√£o: atualizarTotalHorasRegressivo()</h3>
            <p>Testa se o contador regressivo funciona corretamente:</p>
            
            <button class="btn btn-success" onclick="testarContadorRegressivo()">Testar Contador Regressivo</button>
            <div id="resultado-contador"></div>
        </div>

        <div class="test-section">
            <h3>üéØ Cen√°rios de Teste</h3>
            <p>Testa diferentes cen√°rios de uso:</p>
            
            <button class="btn btn-warning" onclick="testarCenarios()">Executar Todos os Cen√°rios</button>
            <div id="resultado-cenarios"></div>
        </div>

        <div class="test-section">
            <h3>üìà Status da Implementa√ß√£o</h3>
            <div id="status-implementacao"></div>
        </div>
    </div>

    <script>
        // Implementar as fun√ß√µes do sistema
        function obterCargaHorariaCurso(tipoCurso) {
            const cargasHorarias = {
                'formacao_45h': 45,
                'formacao_acc_20h': 20,
                'reciclagem_infrator': 30,
                'atualizacao': 15
            };
            
            const cargaHoraria = cargasHorarias[tipoCurso] || 0;
            console.log(`üìä Carga hor√°ria do curso ${tipoCurso}: ${cargaHoraria}h`);
            return cargaHoraria;
        }

        function atualizarTotalHorasRegressivo() {
            console.log('üîÑ Atualizando total de horas (contador regressivo)...');
            
            // Simular elementos do DOM
            const cursoSelect = { value: 'formacao_45h' }; // Simular curso selecionado
            const totalHorasElement = { textContent: '0', style: { color: '#000' } };
            
            const tipoCurso = cursoSelect.value;
            if (!tipoCurso) {
                console.log('‚ÑπÔ∏è Nenhum curso selecionado');
                totalHorasElement.textContent = '0';
                return;
            }
            
            // Obter carga hor√°ria total do curso
            const cargaHorariaTotal = obterCargaHorariaCurso(tipoCurso);
            
            // Simular disciplinas selecionadas
            const disciplinas = [
                { nome: 'Legisla√ß√£o de Tr√¢nsito', horas: 18 },
                { nome: 'Dire√ß√£o Defensiva', horas: 16 }
            ];
            
            // Calcular horas j√° utilizadas pelas disciplinas selecionadas
            let horasUtilizadas = 0;
            
            disciplinas.forEach(disciplina => {
                horasUtilizadas += disciplina.horas;
                console.log(`üìö Disciplina ${disciplina.nome}: ${disciplina.horas}h`);
            });
            
            // Calcular horas restantes
            const horasRestantes = Math.max(0, cargaHorariaTotal - horasUtilizadas);
            
            // Atualizar exibi√ß√£o
            totalHorasElement.textContent = horasRestantes;
            
            console.log(`üìä Total: ${cargaHorariaTotal}h - Utilizadas: ${horasUtilizadas}h = Restantes: ${horasRestantes}h`);
            
            // Feedback visual baseado no status
            if (horasRestantes === 0) {
                totalHorasElement.style.color = '#28a745'; // Verde - curso completo
                totalHorasElement.title = '‚úÖ Curso completo!';
            } else if (horasRestantes <= cargaHorariaTotal * 0.2) {
                totalHorasElement.style.color = '#ffc107'; // Amarelo - quase completo
                totalHorasElement.title = `‚ö†Ô∏è Faltam apenas ${horasRestantes}h para completar o curso`;
            } else {
                totalHorasElement.style.color = '#007bff'; // Azul - normal
                totalHorasElement.title = `${horasRestantes}h restantes de ${cargaHorariaTotal}h`;
            }
            
            return {
                cargaHorariaTotal,
                horasUtilizadas,
                horasRestantes,
                status: horasRestantes === 0 ? 'completo' : horasRestantes <= cargaHorariaTotal * 0.2 ? 'quase_completo' : 'normal'
            };
        }

        function testarObterCargaHoraria() {
            const resultado = document.getElementById('resultado-carga-horaria');
            let html = '<div class="test-result info"><h4>Resultados:</h4>';
            
            const testes = [
                { tipo: 'formacao_45h', esperado: 45 },
                { tipo: 'formacao_acc_20h', esperado: 20 },
                { tipo: 'reciclagem_infrator', esperado: 30 },
                { tipo: 'atualizacao', esperado: 15 },
                { tipo: 'curso_inexistente', esperado: 0 }
            ];
            
            let todosPassaram = true;
            
            testes.forEach(teste => {
                const resultado = obterCargaHorariaCurso(teste.tipo);
                const passou = resultado === teste.esperado;
                todosPassaram = todosPassaram && passou;
                
                html += `<p class="${passou ? 'success' : 'error'}">
                    ${passou ? '‚úÖ' : '‚ùå'} ${teste.tipo}: ${resultado}h (esperado: ${teste.esperado}h)
                </p>`;
            });
            
            html += `<p class="${todosPassaram ? 'success' : 'error'}">
                <strong>Resultado Geral: ${todosPassaram ? '‚úÖ TODOS OS TESTES PASSARAM' : '‚ùå ALGUNS TESTES FALHARAM'}</strong>
            </p></div>`;
            
            resultado.innerHTML = html;
        }

        function testarContadorRegressivo() {
            const resultado = document.getElementById('resultado-contador');
            let html = '<div class="test-result info"><h4>Resultados:</h4>';
            
            // Testar com curso de 45h e 34h utilizadas (18+16)
            const resultadoContador = atualizarTotalHorasRegressivo();
            
            html += `<p class="info">üìä Carga Hor√°ria Total: ${resultadoContador.cargaHorariaTotal}h</p>`;
            html += `<p class="info">üìö Horas Utilizadas: ${resultadoContador.horasUtilizadas}h</p>`;
            html += `<p class="success">‚úÖ Horas Restantes: ${resultadoContador.horasRestantes}h</p>`;
            html += `<p class="info">üéØ Status: ${resultadoContador.status}</p>`;
            
            // Verificar se o c√°lculo est√° correto
            const calculoCorreto = resultadoContador.cargaHorariaTotal - resultadoContador.horasUtilizadas === resultadoContador.horasRestantes;
            html += `<p class="${calculoCorreto ? 'success' : 'error'}">
                <strong>${calculoCorreto ? '‚úÖ' : '‚ùå'} C√°lculo: ${resultadoContador.cargaHorariaTotal}h - ${resultadoContador.horasUtilizadas}h = ${resultadoContador.horasRestantes}h</strong>
            </p>`;
            
            html += '</div>';
            resultado.innerHTML = html;
        }

        function testarCenarios() {
            const resultado = document.getElementById('resultado-cenarios');
            let html = '<div class="test-result info"><h4>Cen√°rios de Teste:</h4>';
            
            const cenarios = [
                {
                    nome: 'Curso 45h - Nenhuma disciplina',
                    curso: 'formacao_45h',
                    disciplinas: [],
                    esperado: 45
                },
                {
                    nome: 'Curso 45h - 1 disciplina (18h)',
                    curso: 'formacao_45h',
                    disciplinas: [{ nome: 'Legisla√ß√£o', horas: 18 }],
                    esperado: 27
                },
                {
                    nome: 'Curso 45h - 2 disciplinas (34h)',
                    curso: 'formacao_45h',
                    disciplinas: [
                        { nome: 'Legisla√ß√£o', horas: 18 },
                        { nome: 'Dire√ß√£o Defensiva', horas: 16 }
                    ],
                    esperado: 11
                },
                {
                    nome: 'Curso 45h - Completo (45h)',
                    curso: 'formacao_45h',
                    disciplinas: [
                        { nome: 'Legisla√ß√£o', horas: 18 },
                        { nome: 'Dire√ß√£o Defensiva', horas: 16 },
                        { nome: 'Meio Ambiente', horas: 11 }
                    ],
                    esperado: 0
                },
                {
                    nome: 'Curso 20h - 1 disciplina (8h)',
                    curso: 'formacao_acc_20h',
                    disciplinas: [{ nome: 'Primeiros Socorros', horas: 8 }],
                    esperado: 12
                }
            ];
            
            let todosCenariosPassaram = true;
            
            cenarios.forEach(cenario => {
                const cargaTotal = obterCargaHorariaCurso(cenario.curso);
                const horasUtilizadas = cenario.disciplinas.reduce((total, disc) => total + disc.horas, 0);
                const horasRestantes = Math.max(0, cargaTotal - horasUtilizadas);
                const passou = horasRestantes === cenario.esperado;
                
                todosCenariosPassaram = todosCenariosPassaram && passou;
                
                html += `<div class="test-result ${passou ? 'success' : 'error'}">
                    <strong>${passou ? '‚úÖ' : '‚ùå'} ${cenario.nome}</strong><br>
                    Curso: ${cenario.curso} (${cargaTotal}h)<br>
                    Disciplinas: ${cenario.disciplinas.length} (${horasUtilizadas}h)<br>
                    Resultado: ${horasRestantes}h (esperado: ${cenario.esperado}h)
                </div>`;
            });
            
            html += `<div class="test-result ${todosCenariosPassaram ? 'success' : 'error'}">
                <strong>Resultado Geral dos Cen√°rios: ${todosCenariosPassaram ? '‚úÖ TODOS PASSARAM' : '‚ùå ALGUNS FALHARAM'}</strong>
            </div></div>`;
            
            resultado.innerHTML = html;
        }

        // Verificar status da implementa√ß√£o
        function verificarStatusImplementacao() {
            const status = document.getElementById('status-implementacao');
            
            let html = '<div class="test-result info"><h4>Status da Implementa√ß√£o:</h4>';
            
            // Verificar se as fun√ß√µes existem
            const funcoes = [
                { nome: 'obterCargaHorariaCurso', existe: typeof obterCargaHorariaCurso === 'function' },
                { nome: 'atualizarTotalHorasRegressivo', existe: typeof atualizarTotalHorasRegressivo === 'function' }
            ];
            
            let todasImplementadas = true;
            
            funcoes.forEach(funcao => {
                html += `<p class="${funcao.existe ? 'success' : 'error'}">
                    ${funcao.existe ? '‚úÖ' : '‚ùå'} ${funcao.nome}: ${funcao.existe ? 'Implementada' : 'N√£o encontrada'}
                </p>`;
                todasImplementadas = todasImplementadas && funcao.existe;
            });
            
            html += `<p class="${todasImplementadas ? 'success' : 'warning'}">
                <strong>Status Geral: ${todasImplementadas ? '‚úÖ IMPLEMENTA√á√ÉO COMPLETA' : '‚ö†Ô∏è IMPLEMENTA√á√ÉO PARCIAL'}</strong>
            </p>`;
            
            html += '</div>';
            status.innerHTML = html;
        }

        // Executar verifica√ß√£o ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            verificarStatusImplementacao();
            console.log('üß™ Teste de contador regressivo carregado!');
        });
    </script>
</body>
</html>
