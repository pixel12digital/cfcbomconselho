<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Final - Modal CFC SEM Backdrop</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* CSS específico para CFCs - Versão Otimizada SEM BACKDROP */
        /* SOLUÇÃO AGGRESSIVA: Sobrescrever TODOS os possíveis seletores do Bootstrap */
        .modal#modalCFC .modal-dialog,
        #modalCFC .modal-dialog,
        .modal#modalCFC .modal-dialog.modal-custom-cfc,
        #modalCFC .modal-dialog.modal-custom-cfc,
        .modal.show#modalCFC .modal-dialog,
        .modal.fade#modalCFC .modal-dialog,
        .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
        .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
            max-width: 1200px !important;
            width: 1200px !important;
            margin: 2rem auto !important;
            position: relative !important;
            left: auto !important;
            right: auto !important;
            transform: none !important;
            box-sizing: border-box !important;
        }

        /* Responsividade otimizada - MÁXIMA ESPECIFICIDADE */
        @media (max-width: 1400px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                max-width: 95vw !important;
                width: 95vw !important;
                margin: 1.5rem auto !important;
            }
        }
        @media (max-width: 1200px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                max-width: 90vw !important;
                width: 90vw !important;
                margin: 1rem auto !important;
            }
        }
        @media (max-width: 768px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                max-width: 95vw !important;
                width: 95vw !important;
                margin: 0.5rem auto !important;
            }
        }
        @media (max-width: 576px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                max-width: 98vw !important;
                width: 98vw !important;
                margin: 0.25rem auto !important;
            }
        }

        /* CRÍTICO: Sobrescrever QUALQUER regra do Bootstrap que possa estar interferindo */
        .modal#modalCFC,
        #modalCFC {
            width: auto !important;
            max-width: none !important;
            min-width: auto !important;
        }

        /* CRÍTICO: Garantir que o modal-dialog tenha a largura correta em TODOS os contextos */
        .modal#modalCFC .modal-dialog,
        #modalCFC .modal-dialog,
        .modal#modalCFC .modal-dialog.modal-custom-cfc,
        #modalCFC .modal-dialog.modal-custom-cfc,
        .modal.show#modalCFC .modal-dialog,
        .modal.fade#modalCFC .modal-dialog,
        .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
        .modal.fade#modalCFC .modal-dialog.modal-custom-cfc,
        .modal.show#modalCFC .modal-dialog.modal-custom-cfc.show,
        .modal.fade#modalCFC .modal-dialog.modal-custom-cfc.fade,
        .modal.show#modalCFC .modal-dialog.modal-custom-cfc.show.fade,
        .modal.fade#modalCFC .modal-dialog.modal-custom-cfc.fade.show {
            width: 1200px !important;
            max-width: 1200px !important;
            min-width: 1200px !important;
            margin: 2rem auto !important;
            position: relative !important;
            left: auto !important;
            right: auto !important;
            transform: none !important;
            box-sizing: border-box !important;
            flex: none !important;
            flex-basis: 1200px !important;
            flex-grow: 0 !important;
            flex-shrink: 0 !important;
        }

        /* CRÍTICO: Sobrescrever qualquer regra de responsividade do Bootstrap */
        @media (min-width: 576px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                width: 1200px !important;
                max-width: 1200px !important;
                min-width: 1200px !important;
            }
        }

        @media (min-width: 768px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                width: 1200px !important;
                max-width: 1200px !important;
                min-width: 1200px !important;
            }
        }

        @media (min-width: 992px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                width: 1200px !important;
                max-width: 1200px !important;
                min-width: 1200px !important;
            }
        }

        @media (min-width: 1200px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                width: 1200px !important;
                max-width: 1200px !important;
                min-width: 1200px !important;
            }
        }

        @media (min-width: 1400px) {
            .modal#modalCFC .modal-dialog,
            #modalCFC .modal-dialog,
            .modal#modalCFC .modal-dialog.modal-custom-cfc,
            #modalCFC .modal-dialog.modal-custom-cfc,
            .modal.show#modalCFC .modal-dialog,
            .modal.fade#modalCFC .modal-dialog,
            .modal.show#modalCFC .modal-dialog.modal-custom-cfc,
            .modal.fade#modalCFC .modal-dialog.modal-custom-cfc {
                width: 1200px !important;
                max-width: 1200px !important;
                min-width: 1200px !important;
            }
        }

        /* CRÍTICO: Remover completamente o backdrop do modal */
        .modal-backdrop {
            display: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
        }
        
        /* CRÍTICO: Garantir que o modal não tenha backdrop */
        #modalCFC {
            background: transparent !important;
        }
        
        #modalCFC::before,
        #modalCFC::after {
            display: none !important;
        }

        /* Garantir que o modal não seja cortado */
        #modalCFC {
            overflow: visible !important;
            z-index: 1055 !important;
        }

        #modalCFC .modal-dialog {
            overflow: visible !important;
            z-index: 1056 !important;
        }

        #modalCFC .modal-content {
            overflow: visible !important;
            z-index: 1057 !important;
        }

        /* CRÍTICO: Forçar estrutura flexbox para o modal-content */
        #modalCFC .modal-content {
            display: flex !important;
            flex-direction: column !important;
            height: auto !important;
            min-height: 0 !important;
            position: relative !important;
            overflow: hidden !important;
        }

        /* CRÍTICO: Garantir que o header tenha altura fixa */
        #modalCFC .modal-header {
            flex-shrink: 0 !important;
            position: relative !important;
            z-index: 3 !important;
        }

        /* CRÍTICO: Garantir que o body seja flexível */
        #modalCFC .modal-body {
            flex: 1 1 auto !important;
            overflow-y: auto !important;
            max-height: 70vh !important;
            position: relative !important;
            z-index: 1 !important;
        }

        /* CRÍTICO: Garantir que o footer fique no final */
        #modalCFC .modal-footer {
            flex-shrink: 0 !important;
            position: relative !important;
            z-index: 3 !important;
            margin-top: auto !important;
            border-top: 1px solid #dee2e6 !important;
            background-color: #f8f9fa !important;
            padding: 1rem !important;
            width: 100% !important;
            box-sizing: border-box !important;
            bottom: 0 !important;
            left: 0 !important;
            right: 0 !important;
        }

        /* Estilos para teste */
        body {
            background-color: #f8f9fa;
            padding: 20px;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .test-button {
            margin: 10px;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 8px;
        }
        
        .status-indicator {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .status-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .backdrop-test {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 400% 400%;
            animation: gradientShift 3s ease infinite;
            padding: 20px;
            border-radius: 10px;
            color: white;
            text-align: center;
            margin: 20px 0;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="text-center mb-4">
            <i class="fas fa-check-circle text-success me-2"></i>
            Teste Final - Modal CFC SEM Backdrop (1200px)
        </h1>
        
        <div class="backdrop-test">
            <h3>🎯 Teste de Backdrop Removido</h3>
            <p>Este fundo colorido deve ficar VISÍVEL quando o modal estiver aberto</p>
            <p>Se você vir um fundo escuro sobre este, o backdrop NÃO foi removido!</p>
            <p><strong>Modal agora com 1200px de largura para melhor acomodação dos campos!</strong></p>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-cog me-2"></i>Controles de Teste</h5>
                    </div>
                    <div class="card-body">
                        <button class="btn btn-primary test-button" onclick="abrirModalCFC('criar')">
                            <i class="fas fa-plus me-2"></i>Abrir Modal CFC
                        </button>
                        
                        <button class="btn btn-success test-button" onclick="verificarBackdrop()">
                            <i class="fas fa-search me-2"></i>Verificar Backdrop
                        </button>
                        
                        <button class="btn btn-info test-button" onclick="verificarEstrutura()">
                            <i class="fas fa-paint-brush me-2"></i>Verificar Estrutura
                        </button>
                        
                        <button class="btn btn-warning test-button" onclick="testarResponsividade()">
                            <i class="fas fa-mobile-alt me-2"></i>Testar Responsividade
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-info-circle me-2"></i>Status do Teste</h5>
                    </div>
                    <div class="card-body">
                        <div id="statusContainer">
                            <div class="status-indicator status-success">
                                ✅ Modal carregado e pronto para teste
                            </div>
                            <div class="status-indicator status-success">
                                🎯 Backdrop configurado para ser removido
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-list me-2"></i>Log de Testes</h5>
                    </div>
                    <div class="card-body">
                        <div id="logContainer" style="max-height: 300px; overflow-y: auto; background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace;">
                            <div class="text-muted">Log de testes aparecerá aqui...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Bootstrap para Cadastro/Edição de CFC -->
    <div class="modal fade" id="modalCFC" tabindex="-1" aria-labelledby="modalCFCLabel" aria-hidden="true">
        <div class="modal-dialog modal-custom-cfc">
            <div class="modal-content">
                <form id="formCFC" onsubmit="return false;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalTitle">
                            <i class="fas fa-building me-2"></i>Novo CFC
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" name="acao" id="acaoCFC" value="criar">
                        <input type="hidden" name="cfc_id" id="cfc_id" value="">
                        
                        <div class="container-fluid">
                            <!-- Seção 1: Informações Básicas -->
                            <div class="row mb-2">
                                <div class="col-12">
                                    <h6 class="text-primary border-bottom pb-1 mb-2">
                                        <i class="fas fa-building me-1"></i>Informações Básicas
                                    </h6>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="nome" class="form-label">Nome do CFC *</label>
                                        <input type="text" class="form-control" id="nome" name="nome" required 
                                               placeholder="Nome completo do Centro de Formação de Condutores">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="cnpj" class="form-label">CNPJ *</label>
                                        <input type="text" class="form-control" id="cnpj" name="cnpj" required 
                                               placeholder="00.000.000/0000-00">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-2">
                                <div class="col-md-12">
                                    <div class="mb-1">
                                        <label for="razao_social" class="form-label">Razão Social</label>
                                        <input type="text" class="form-control" id="razao_social" name="razao_social" 
                                               placeholder="Razão social da empresa (opcional)">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Seção 2: Contato -->
                            <div class="row mb-2">
                                <div class="col-12">
                                    <h6 class="text-primary border-bottom pb-1 mb-2">
                                        <i class="fas fa-phone me-1"></i>Contato
                                    </h6>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="email" class="form-label">E-mail</label>
                                        <input type="email" class="form-control" id="email" name="email" 
                                               placeholder="contato@cfc.com.br">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="telefone" class="form-label">Telefone</label>
                                        <input type="text" class="form-control" id="telefone" name="telefone" 
                                               placeholder="(00) 00000-0000">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Seção 3: Endereço -->
                            <div class="row mb-2">
                                <div class="col-12">
                                    <h6 class="text-primary border-bottom pb-1 mb-2">
                                        <i class="fas fa-map-marker-alt me-1"></i>Endereço
                                    </h6>
                                </div>
                                <div class="col-md-2">
                                    <div class="mb-1">
                                        <label for="cep" class="form-label">CEP</label>
                                        <input type="text" class="form-control" id="cep" name="cep" 
                                               placeholder="00000-000">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-1">
                                        <label for="endereco" class="form-label">Endereço</label>
                                        <input type="text" class="form-control" id="endereco" name="endereco" 
                                               placeholder="Rua, Avenida, número, etc.">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="mb-1">
                                        <label for="bairro" class="form-label">Bairro</label>
                                        <input type="text" class="form-control" id="bairro" name="bairro" 
                                               placeholder="Centro, Jardim, etc.">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="mb-1">
                                        <label for="cidade" class="form-label">Cidade</label>
                                        <input type="text" class="form-control" id="cidade" name="cidade" 
                                               placeholder="Nome da cidade">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="mb-1">
                                        <label for="uf" class="form-label">UF</label>
                                        <select class="form-select" id="uf" name="uf">
                                            <option value="">Selecione...</option>
                                            <option value="PE">Pernambuco</option>
                                            <option value="SP">São Paulo</option>
                                            <option value="RJ">Rio de Janeiro</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Seção 4: Configurações -->
                            <div class="row mb-2">
                                <div class="col-12">
                                    <h6 class="text-primary border-bottom pb-1 mb-2">
                                        <i class="fas fa-cog me-1"></i>Configurações
                                    </h6>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="responsavel_id" class="form-label">Responsável</label>
                                        <select class="form-select" id="responsavel_id" name="responsavel_id">
                                            <option value="">Selecione um usuário...</option>
                                            <option value="1">Administrador</option>
                                            <option value="2">Instrutor</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-1">
                                        <label for="ativo" class="form-label">Status</label>
                                        <select class="form-select" id="ativo" name="ativo">
                                            <option value="1">Ativo</option>
                                            <option value="0">Inativo</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Seção 5: Observações -->
                            <div class="row">
                                <div class="col-12">
                                    <h6 class="text-primary border-bottom pb-1 mb-2">
                                        <i class="fas fa-sticky-note me-1"></i>Observações
                                    </h6>
                                    <div class="mb-1">
                                        <label for="observacoes" class="form-label">Observações</label>
                                        <textarea class="form-control" id="observacoes" name="observacoes" rows="3" 
                                                  placeholder="Informações adicionais sobre o CFC..."></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times me-1"></i>Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary" id="btnSalvarCFC">
                            <i class="fas fa-save me-1"></i>Salvar CFC
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Função para abrir modal de CFC
        function abrirModalCFC(modo = 'criar') {
            // Configurar modal baseado no modo
            const modal = document.getElementById('modalCFC');
            const modalTitle = modal.querySelector('.modal-title');
            const submitBtn = modal.querySelector('#btnSalvarCFC'); // Changed from #submitBtn to #btnSalvarCFC
            const form = modal.querySelector('#formCFC');
            
            if (modo === 'criar') {
                modalTitle.textContent = 'Novo CFC';
                submitBtn.textContent = 'Criar CFC';
                form.reset();
                // Limpar campos específicos
                document.getElementById('acaoCFC').value = 'criar'; // Changed from cfcId to acaoCFC
                document.getElementById('cfc_id').value = '';
                document.getElementById('status').value = 'ativo'; // This line seems to be a leftover from a previous test and should be removed or changed
            } else {
                modalTitle.textContent = 'Editar CFC';
                submitBtn.textContent = 'Atualizar CFC';
            }

            // SOLUÇÃO CRÍTICA: Forçar estilos CSS antes de abrir o modal
            const modalDialog = modal.querySelector('.modal-dialog');
            if (modalDialog) {
                // Aplicar estilos inline para sobrescrever qualquer CSS
                modalDialog.style.setProperty('max-width', '1200px', 'important');
                modalDialog.style.setProperty('width', '1200px', 'important');
                modalDialog.style.setProperty('margin', '2rem auto', 'important');
                modalDialog.style.setProperty('position', 'relative', 'important');
                modalDialog.style.setProperty('z-index', '1056', 'important');

                // Aplicar estilos responsivos
                if (window.innerWidth <= 1400) {
                    modalDialog.style.setProperty('max-width', '95vw', 'important');
                    modalDialog.style.setProperty('width', '95vw', 'important');
                    modalDialog.style.setProperty('margin', '1.5rem auto', 'important');
                }
                if (window.innerWidth <= 1200) {
                    modalDialog.style.setProperty('max-width', '90vw', 'important');
                    modalDialog.style.setProperty('width', '90vw', 'important');
                    modalDialog.style.setProperty('margin', '1rem auto', 'important');
                }
                if (window.innerWidth <= 768) {
                    modalDialog.style.setProperty('max-width', '95vw', 'important');
                    modalDialog.style.setProperty('width', '95vw', 'important');
                    modalDialog.style.setProperty('margin', '0.5rem auto', 'important');
                }
                if (window.innerWidth <= 576) {
                    modalDialog.style.setProperty('max-width', '98vw', 'important');
                    modalDialog.style.setProperty('width', '98vw', 'important');
                    modalDialog.style.setProperty('margin', '0.25rem auto', 'important');
                }
            }

            // Abrir modal
            const bootstrapModal = new bootstrap.Modal(modal, {
                backdrop: false,
                keyboard: true
            });
            bootstrapModal.show();

            // CRÍTICO: Remover backdrop programaticamente
            setTimeout(() => {
                // Remover backdrop se existir
                const backdrop = document.querySelector('.modal-backdrop');
                if (backdrop) {
                    backdrop.remove();
                }

                // Remover backdrop do body se existir
                const bodyBackdrop = document.querySelector('body > .modal-backdrop');
                if (bodyBackdrop) {
                    bodyBackdrop.remove();
                }

                // Aplicar estilos finais para garantir funcionamento
                if (modalDialog) {
                    modalDialog.style.setProperty('max-width', '1200px', 'important');
                    modalDialog.style.setProperty('width', '1200px', 'important');
                    modalDialog.style.setProperty('margin', '2rem auto', 'important');
                    modalDialog.style.setProperty('position', 'relative', 'important');
                    modalDialog.style.setProperty('left', 'auto', 'important');
                    modalDialog.style.setProperty('right', 'auto', 'important');
                    modalDialog.style.setProperty('transform', 'none', 'important');

                    // DEBUG: Verificar se os estilos foram aplicados
                    console.log('🔍 DEBUG Modal Width:', {
                        computedWidth: window.getComputedStyle(modalDialog).width,
                        computedMaxWidth: window.getComputedStyle(modalDialog).maxWidth,
                        offsetWidth: modalDialog.offsetWidth,
                        clientWidth: modalDialog.clientWidth,
                        inlineWidth: modalDialog.style.width,
                        inlineMaxWidth: modalDialog.style.maxWidth
                    });
                }

                // NOVA SOLUÇÃO: Observer para garantir que a largura seja mantida
                const widthObserver = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        if (mutation.type === 'attributes' && 
                            (mutation.attributeName === 'style' || mutation.attributeName === 'class')) {
                            
                            const currentWidth = window.getComputedStyle(modalDialog).width;
                            const currentMaxWidth = window.getComputedStyle(modalDialog).maxWidth;
                            
                            // Se a largura foi alterada, forçar novamente
                            if (currentWidth !== '1200px' || currentMaxWidth !== '1200px') {
                                console.log('🔄 Forçando largura novamente:', { currentWidth, currentMaxWidth });
                                modalDialog.style.setProperty('max-width', '1200px', 'important');
                                modalDialog.style.setProperty('width', '1200px', 'important');
                                modalDialog.style.setProperty('min-width', '1200px', 'important');
                            }
                        }
                    });
                });

                // Observar mudanças no modal-dialog
                widthObserver.observe(modalDialog, {
                    attributes: true,
                    attributeFilter: ['style', 'class']
                });

                // Aplicar largura a cada 100ms por 2 segundos para garantir
                let attempts = 0;
                const widthInterval = setInterval(() => {
                    if (attempts >= 20) {
                        clearInterval(widthInterval);
                        return;
                    }
                    
                    modalDialog.style.setProperty('max-width', '1200px', 'important');
                    modalDialog.style.setProperty('width', '1200px', 'important');
                    modalDialog.style.setProperty('min-width', '1200px', 'important');
                    
                    attempts++;
                }, 100);

            }, 100);
        }

        // Função para fechar modal
        function fecharModalCFC() {
            const modal = document.getElementById('modalCFC');
            const bootstrapModal = bootstrap.Modal.getInstance(modal);
            if (bootstrapModal) {
                bootstrapModal.hide();
            }
        }

        // Função para testar modal
        function testarModal() {
            console.log('🧪 Testando modal...');
            abrirModalCFC('criar');
        }

        // Função para testar modal de edição
        function testarModalEdicao() {
            console.log('✏️ Testando modal de edição...');
            // Preencher alguns campos para simular edição
            document.getElementById('nome').value = 'CFC Teste';
            document.getElementById('cnpj').value = '12.345.678/0001-90';
            document.getElementById('cidade').value = 'São Paulo';
            document.getElementById('uf').value = 'SP';
            document.getElementById('telefone').value = '(11) 99999-9999';
            document.getElementById('responsavel_id').value = '1'; // Changed from responsavel to responsavel_id
            document.getElementById('email').value = 'joao@cfcteste.com';
            document.getElementById('endereco').value = 'Rua Teste, 123';
            document.getElementById('cep').value = '01234-567';
            document.getElementById('ativo').value = '1'; // Changed from status to ativo
            
            abrirModalCFC('editar');
        }

        // Função para testar responsividade
        function testarResponsividade() {
            console.log('📱 Testando responsividade...');
            // Simular diferentes tamanhos de tela
            const sizes = [
                { width: 1400, height: 900, name: 'Desktop Grande' },
                { width: 1200, height: 800, name: 'Desktop' },
                { width: 992, height: 700, name: 'Tablet Grande' },
                { width: 768, height: 600, name: 'Tablet' },
                { width: 576, height: 500, name: 'Mobile Grande' },
                { width: 375, height: 400, name: 'Mobile' }
            ];

            let currentIndex = 0;
            const interval = setInterval(() => {
                if (currentIndex >= sizes.length) {
                    clearInterval(interval);
                    // Restaurar tamanho original
                    window.resizeTo(1200, 800);
                    return;
                }

                const size = sizes[currentIndex];
                console.log(`📱 Testando ${size.name}: ${size.width}x${size.height}`);
                window.resizeTo(size.width, size.height);
                
                currentIndex++;
            }, 2000);
        }

        // Função para limpar console
        function limparConsole() {
            console.clear();
            console.log('🧹 Console limpo!');
        }

        // Função para mostrar informações do modal
        function mostrarInfoModal() {
            const modal = document.getElementById('modalCFC');
            const modalDialog = modal.querySelector('.modal-dialog');
            
            if (modalDialog) {
                const computedStyle = window.getComputedStyle(modalDialog);
                console.log('📊 Informações do Modal:', {
                    width: computedStyle.width,
                    maxWidth: computedStyle.maxWidth,
                    minWidth: computedStyle.minWidth,
                    margin: computedStyle.margin,
                    position: computedStyle.position,
                    left: computedStyle.left,
                    right: computedStyle.right,
                    transform: computedStyle.transform,
                    offsetWidth: modalDialog.offsetWidth,
                    clientWidth: modalDialog.clientWidth,
                    inlineWidth: modalDialog.style.width,
                    inlineMaxWidth: modalDialog.style.maxWidth
                });
            } else {
                console.log('❌ Modal dialog não encontrado');
            }
        }

        // Função para forçar largura manualmente
        function forcarLargura() {
            const modal = document.getElementById('modalCFC');
            const modalDialog = modal.querySelector('.modal-dialog');
            
            if (modalDialog) {
                console.log('🔧 Forçando largura manualmente...');
                modalDialog.style.setProperty('width', '1200px', 'important');
                modalDialog.style.setProperty('max-width', '1200px', 'important');
                modalDialog.style.setProperty('min-width', '1200px', 'important');
                
                // Verificar se foi aplicado
                setTimeout(() => {
                    const computedStyle = window.getComputedStyle(modalDialog);
                    console.log('✅ Largura forçada:', {
                        width: computedStyle.width,
                        maxWidth: computedStyle.maxWidth,
                        minWidth: computedStyle.minWidth
                    });
                }, 100);
            }
        }

        // Inicializar quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Página de teste carregada!');
            console.log('📋 Funcionalidades disponíveis:');
            console.log('  - testarModal() - Abrir modal de criação');
            console.log('  - testarModalEdicao() - Abrir modal de edição');
            console.log('  - testarResponsividade() - Testar diferentes tamanhos');
            console.log('  - limparConsole() - Limpar console');
            console.log('  - mostrarInfoModal() - Mostrar informações do modal');
            console.log('  - forcarLargura() - Forçar largura manualmente');
            console.log('  - fecharModalCFC() - Fechar modal');
        });
    </script>
</body>
</html>

