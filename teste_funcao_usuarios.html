<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Fun√ß√£o Usu√°rios</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .btn { padding: 10px 20px; margin: 10px; border: none; border-radius: 5px; cursor: pointer; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal-content { background: white; margin: 15% auto; padding: 20px; width: 80%; max-width: 500px; border-radius: 5px; }
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; margin-bottom: 5px; font-weight: 500; }
        .form-control { width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 4px; font-size: 14px; }
    </style>
</head>
<body>
    <h1>Teste da Fun√ß√£o showCreateUserModal</h1>
    
    <button class="btn btn-primary" id="btnNovoUsuario">
        Novo Usu√°rio
    </button>
    
    <button class="btn btn-secondary" id="btnTeste">
        Teste de Fun√ß√µes
    </button>
    
    <div id="userModal" class="modal">
        <div class="modal-content">
            <h3 id="userModalTitle">Modal de Usu√°rio</h3>
            <form id="userForm">
                <div class="form-group">
                    <label for="userName" class="form-label">Nome Completo</label>
                    <input type="text" id="userName" name="nome" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="userEmail" class="form-label">E-mail</label>
                    <input type="email" id="userEmail" name="email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="userType" class="form-label">Tipo de Usu√°rio</label>
                    <select id="userType" name="tipo" class="form-control" required>
                        <option value="">Selecione...</option>
                        <option value="admin">Administrador</option>
                        <option value="instrutor">Instrutor</option>
                        <option value="aluno">Aluno</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="userPassword" class="form-label">Senha</label>
                    <input type="password" id="userPassword" name="senha" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="userConfirmPassword" class="form-label">Confirmar Senha</label>
                    <input type="password" id="userConfirmPassword" name="confirmar_senha" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="userActive" name="ativo" checked>
                        Usu√°rio Ativo
                    </label>
                </div>
            </form>
            <div style="margin-top: 20px;">
                <button onclick="closeUserModal()" class="btn btn-secondary">Cancelar</button>
                <button onclick="saveUser()" class="btn btn-primary">Salvar</button>
            </div>
        </div>
    </div>
    
    <script>
        // Vari√°veis globais
        let currentUser = null;
        let isEditMode = false;
        
        // Fun√ß√£o para mostrar modal
        function showCreateUserModal() {
            console.log('üöÄ Fun√ß√£o showCreateUserModal chamada!');
            isEditMode = false;
            currentUser = null;
            
            document.getElementById('userModalTitle').textContent = 'Novo Usu√°rio';
            document.getElementById('userForm').reset();
            
            document.getElementById('userModal').style.display = 'block';
            console.log('‚úÖ Modal aberto com sucesso!');
        }
        
        // Fun√ß√£o para fechar modal
        function closeUserModal() {
            console.log('üö™ Fechando modal...');
            document.getElementById('userModal').style.display = 'none';
            document.getElementById('userForm').reset();
            currentUser = null;
            console.log('‚úÖ Modal fechado com sucesso!');
        }
        
        // Fun√ß√£o para salvar usu√°rio
        function saveUser() {
            console.log('üíæ Fun√ß√£o saveUser chamada!');
            const form = document.getElementById('userForm');
            const formData = new FormData(form);
            
            // Valida√ß√µes b√°sicas
            if (!formData.get('nome').trim()) {
                alert('Nome √© obrigat√≥rio');
                return;
            }
            
            if (!formData.get('email').trim()) {
                alert('E-mail √© obrigat√≥rio');
                return;
            }
            
            if (!formData.get('tipo')) {
                alert('Tipo de usu√°rio √© obrigat√≥rio');
                return;
            }
            
            if (!formData.get('senha')) {
                alert('Senha √© obrigat√≥ria');
                return;
            }
            
            if (formData.get('senha').length < 6) {
                alert('Senha deve ter pelo menos 6 caracteres');
                return;
            }
            
            if (formData.get('senha') !== formData.get('confirmar_senha')) {
                alert('Senhas n√£o conferem');
                return;
            }
            
            console.log('‚úÖ Valida√ß√µes passaram!');
            alert('Usu√°rio salvo com sucesso! (simulado)');
            closeUserModal();
        }
        
        // Fun√ß√£o para mostrar notifica√ß√µes
        function showNotification(message, type = 'info') {
            console.log(`üîî Mostrando notifica√ß√£o: ${message} (tipo: ${type})`);
            alert(`${type.toUpperCase()}: ${message}`);
        }
        
        // Garantir que as fun√ß√µes estejam dispon√≠veis globalmente
        window.showCreateUserModal = showCreateUserModal;
        window.closeUserModal = closeUserModal;
        window.saveUser = saveUser;
        window.showNotification = showNotification;
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìã DOM carregado, configurando event listeners...');
            
            const btnNovoUsuario = document.getElementById('btnNovoUsuario');
            if (btnNovoUsuario) {
                btnNovoUsuario.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('üñ±Ô∏è Bot√£o Novo Usu√°rio clicado');
                    showCreateUserModal();
                });
            }
            
            const btnTeste = document.getElementById('btnTeste');
            if (btnTeste) {
                btnTeste.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('üñ±Ô∏è Bot√£o Teste clicado');
                    
                    // Testar todas as fun√ß√µes
                    console.log('üîç Testando fun√ß√µes:');
                    console.log('- showCreateUserModal:', typeof showCreateUserModal);
                    console.log('- closeUserModal:', typeof closeUserModal);
                    console.log('- saveUser:', typeof saveUser);
                    console.log('- showNotification:', typeof showNotification);
                    
                    // Testar notifica√ß√£o
                    showNotification('Teste de notifica√ß√£o OK', 'success');
                });
            }
            
            console.log('‚úÖ Event listeners configurados!');
        });
        
        // Verifica√ß√£o final
        console.log('üîç Verifica√ß√£o inicial das fun√ß√µes:');
        console.log('- showCreateUserModal:', typeof showCreateUserModal);
        console.log('- closeUserModal:', typeof closeUserModal);
        console.log('- saveUser:', typeof saveUser);
        console.log('- showNotification:', typeof showNotification);
    </script>
</body>
</html>
